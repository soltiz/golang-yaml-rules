---

# Jsonpath syntax : https://support.smartbear.com/alertsite/docs/monitors/api/endpoint/jsonpath.html



add_or_update_policy_attribute:
  match: "$..spec.containers[*]"
  set:
  - subpath: $
    values:
      imagePullPolicy: alwaysPull

provide_default_value:
  match: "$..spec.containers[?(!@.isRoot)]"
  set:
  - subpath: "$"
    values:
      isRoot: true

assign_section:
  match: "$..spec.containers[*]"
  set:
  - subpath: "$"
    values:
      credentials:
        username: cedric
        password: secret

override_existing_image_attribute_but_only_if_it_exists:
  match: "$..spec.containers[?(@.image)]"
  set:
  - subpath: "$"
    values:
      image: here/is/my.img


delete_one_container_from_array:
  match: "$..spec.containers"
  deleteChildrenThatMatch: "?(@.to_remove==true)"

delete_unwanted_key_from_map:
  match: "$..spec.containers[*]"
  deleteChildrenThatMatch: "$.unwanted"
