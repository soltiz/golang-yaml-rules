---

# Jsonpath syntax : https://support.smartbear.com/alertsite/docs/monitors/api/endpoint/jsonpath.html


override_existing_image_attribute_if_it_exists:
  match: "$..spec.containers[?(@.image)]"
  set:
  - subpath: "$"
    values:
      image: here/is/my.img

add_or_update_policy_attribute:
  match: "$..spec.containers[*]"
  set:
  - subpath: $
    values:
      imagePullPolicy: alwaysPull

provide_default_value:
  match: "$..spec.containers[?(!@.isRoot)]"
  set:
  - subpath: "$"
    values:
      isRoot: true

assign_section:
  match: "$..spec.containers[*]"
  set:
  - subpath: "$"
    values:
      credentials:
        username: cedric
        password: secret


delete_one_container:
  match: "$..spec.containers"
  deleteChildrenThatMatch: "?(@.to_remove==true)"